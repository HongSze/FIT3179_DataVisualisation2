{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Death Rate vs SO2",
  "width": 760,
  "height": 460,
  "data": { "url": "../Dataset/malaysia_health_pollution_combined.csv", "format": { "type": "csv" } },
  "transform": [
    { "filter": "datum.item == 'Death Rate'" },
    { "calculate": "toNumber(datum['SO2'])", "as": "pollution_num" },
    { "calculate": "toNumber(datum.value)", "as": "death_rate_num" },
    { "filter": "isValid(datum.pollution_num) && isValid(datum.death_rate_num)" }
  ],
  "mark": { "type": "point", "filled": true, "size": 60, "opacity": 0.85 },
  "encoding": {
    "x": { "field": "pollution_num", "type": "quantitative", "title": "SO2 (concentration)" },
    "y": { "field": "death_rate_num", "type": "quantitative", "title": "Death Rate" },
    "tooltip": [
      { "field": "date", "type": "temporal", "title": "Date" },
      { "field": "pollution_num", "type": "quantitative", "title": "SO2", "format": ".2f" },
      { "field": "death_rate_num", "type": "quantitative", "title": "Death Rate", "format": ".2f" }
    ],
    "color": { "value": "#1f77b4" }
  }
}
    